<div id="ipython-notebook">
            <a class="interact-button" href="http://datahub.berkeley.edu/user-redirect/interact?repo=textbook&path=notebooks/airline_ontime.csv&path=notebooks/Center.ipynb">Interact</a>
            
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$']],
      processEscapes: true
    }
  });
</script>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have seen that studying the variability of an estimate involves questions such as:</p>
<ul>
<li>Where is the empirical histogram centered?</li>
<li>About how far away from center could the values be?</li>
</ul>
<p>In order to discuss estimates and their variability in greater detail, it will help to quantify some basic features of distributions.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-mean-of-a-list-of-numbers">The mean of a list of numbers<a class="anchor-link" href="#The-mean-of-a-list-of-numbers">¶</a></h3><p>In this course, we will use the words "average" and "mean" interchangeably.</p>
<p><strong>Definition</strong>: The <em>average</em> or <em>mean</em> of a list of numbers is the sum of all the numbers in the list, divided by the number of entries in the list.</p>
<p>Here is the definition applied to a list of 20 numbers.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># The data: a list of numbers</span>

<span class="n">x_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="c1"># The average</span>

<span class="nb">sum</span><span class="p">(</span><span class="n">x_list</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">x_list</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>3.15</pre></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The average of the list is 3.15.</p>
<p>You can think of taking the mean as an "equalizing" or "smoothing" operation. For example, imagine the entries in <code>x_list</code> being the amounts of money (in dollars) in the pockets of 20 different people. To get the mean, you first put all of the money into one big pot, and then divide it evenly among all 20 people. They had started out with different amounts of money in their pockets, but now each person has $3.15, the average amount.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Computation:</strong> We could instead have found the mean by applying the function <code>np.mean</code> to the list <code>x_list</code>. Differences in rounding lead to answers that differ very slightly.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">x_list</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>3.1499999999999999</pre></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or we could have placed the list in a table, and used the Table method <code>mean</code>:</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s1">'value'</span><span class="p">,</span> <span class="n">x_list</span><span class="p">)</span>
<span class="n">x_table</span><span class="p">[</span><span class="s1">'value'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>3.1499999999999999</pre></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-mean-and-the-histogram">The mean and the histogram<a class="anchor-link" href="#The-mean-and-the-histogram">¶</a></h3><p>Another way to calculate the mean is to first arrange the list in a distribution table. The columns contain the distinct values in the list, the count of each value, and the corresponding proportion. The sum of the column <code>count</code> is 20, the number of entries in the list.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="s1">'value'</span><span class="p">,</span> <span class="s1">'count'</span><span class="p">])</span><span class="o">.</span><span class="n">with_rows</span><span class="p">([</span>
       <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> 
       <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> 
       <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> 
       <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">])</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'count'</span><span class="p">)</span> 
<span class="n">x_dist</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s1">'proportion'</span><span class="p">,</span> <span class="n">counts</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">))</span>

<span class="c1"># the distribution table</span>
<span class="n">x_dist</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea output_execute_result">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>value</th> <th>count</th> <th>proportion</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>2    </td> <td>6    </td> <td>0.3       </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>3    </td> <td>8    </td> <td>0.4       </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>4    </td> <td>3    </td> <td>0.15      </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>5    </td> <td>3    </td> <td>0.15      </td>
        </tr>
    </tbody>
</table></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The sum of the numbers in the list can be calculated by multiplying the first two columns and adding up – four 2's, five 3's, and so on – and then dividing by 20:</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">x_dist</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'value'</span><span class="p">)</span> <span class="o">*</span> <span class="n">x_dist</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'count'</span><span class="p">))</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x_dist</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'count'</span><span class="p">))</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>3.1499999999999999</pre></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is the same as multiplying the first and third columns – the values and their proportions – and adding up:</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">x_dist</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'value'</span><span class="p">)</span> <span class="o">*</span> <span class="n">x_dist</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'proportion'</span><span class="p">))</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>3.1500000000000004</pre></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We now have <strong>another way to think about the mean:</strong> The mean of a list is the <em>weighted</em> average of the <em>distinct</em> values, where the <em>weights are the proportions</em> in which those values appear.</p>
<p>Physically, this implies that <strong>the average is the balance point of the histogram</strong>. Here is the histogram of the distribution. Imagine that it is made out of cardboard and that you are trying to balance the cardboard figure at a point on the horizontal axis. The average of 3.15 is where the figure will balance.</p>
<p>To understand why that is, you will have to study some physics. Balance points, or centers of gravity, can be calculated in exactly the way we calculated the mean from the distribution table.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x_dist</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">'value'</span><span class="p">,</span> <span class="s1">'proportion'</span><span class="p">])</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">counts</span><span class="o">=</span><span class="s1">'value'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">5.6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Center_16_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice that the mean of a list depends only on the distinct values and their proportions; you do not need to know how many entries there are in the list.</p>
<p>In other words, the average is a property of the histogram. If two lists have the same histogram, they will also have the same average.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-mean-and-the-median">The mean and the median<a class="anchor-link" href="#The-mean-and-the-median">¶</a></h3><p>If a student's score on a test is below average, does that imply that the student is in the bottom half of the class on that test?</p>
<p>Happily for the student, the answer is, "Not necessarily." The reason has to do with the relation between the average, which is the balance point of the histogram, and the median, which is the "half-way point" of the data.</p>
<p>Let's compare the balance point of the histogram to the point that has 50% of the area of the histogram on either side of it.</p>
<p>The relationship is easy to see in a simple example. Here is the list 1, 2, 2, 3, represented as a distribution table called <code>sym</code> for "symmetric".</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sym</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">([</span>
        <span class="s1">'value'</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
        <span class="s1">'dist'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.25</span><span class="p">]</span>
        <span class="p">])</span>
<span class="n">sym</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea output_execute_result">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>value</th> <th>dist</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1    </td> <td>0.25</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>2    </td> <td>0.5 </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>3    </td> <td>0.25</td>
        </tr>
    </tbody>
</table></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The histogram (or a calculation) shows that the average and median are both 2.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sym</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">counts</span><span class="o">=</span><span class="s1">'value'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">10.6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Center_21_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In general, for <strong>symmetric distributions</strong>, the mean and the median are equal.</p>
<p>What if the distribution is not symmetric? We will explore this by making a change in the histogram above: we will take the bar at the value 3 and slide it over to the value 10.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Average versus median:</span>
<span class="c1"># Balance point versus 50% point</span>

<span class="n">slide</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">([</span>
        <span class="s1">'value'</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> 
        <span class="s1">'dist1'</span><span class="p">,[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
        <span class="s1">'dist2'</span><span class="p">,[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span> 
        <span class="p">])</span>
<span class="n">slide</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea output_execute_result">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>value</th> <th>dist1</th> <th>dist2</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1    </td> <td>0.25 </td> <td>0.25 </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>2    </td> <td>0.5  </td> <td>0.5  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>3    </td> <td>0.25 </td> <td>0    </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>10   </td> <td>0    </td> <td>0.25 </td>
        </tr>
    </tbody>
</table></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">slide</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">counts</span><span class="o">=</span><span class="s1">'value'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">10.6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Center_24_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The blue histogram represents the original distribution; the gold histogram starts out the same as the blue at the left end, but its rightmost bar has slid over to the value 10. The brown part is where the two histograms overlap.</p>
<p>The median and mean of the blue distribution are both equal to 2. The median of the gold distribution is also equal to 2; the area on either side of 2 is still 50%, though the right half is distributed differently from the left.</p>
<p>But the mean of the gold distribution is not 2: the gold histogram would not balance at 2. The balance point has shifted to the right, to 3.75.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">slide</span><span class="p">[</span><span class="s1">'value'</span><span class="p">]</span><span class="o">*</span><span class="n">slide</span><span class="p">[</span><span class="s1">'dist2'</span><span class="p">])</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>3.75</pre></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the gold distribution, 3 out of 4 entries (75%) are below average. The student with a below average score can therefore take heart. He or she might be in the majority of the class.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>The mean, the median, and skewed distributions:</strong> In general, if the histogram has a tail on one side (the formal term is "skewed"), then the mean is pulled away from the median in the direction of the tail.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Example: Flight Delays.</strong> The Bureau of Transportation Statistics provides data on departures and arrivals of flights in the United States. The table <code>ua</code> contains the departure delay times, in minutes, of about 37,500 United Airlines flights over the past few years. A negative delay means that the flight left earlier than scheduled.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ontime</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">'airline_ontime.csv'</span><span class="p">)</span>
<span class="n">ontime</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea ">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Carrier</th> <th>Departure Delay</th> <th>Arrival Delay</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>AA     </td> <td>-1             </td> <td>-1           </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>AA     </td> <td>-1             </td> <td>-1           </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>AA     </td> <td>-1             </td> <td>-1           </td>
        </tr>
    </tbody>
</table>
<p>... (457010 rows omitted)</p></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ua</span> <span class="o">=</span> <span class="n">ontime</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">'Carrier'</span><span class="p">,</span> <span class="s1">'UA'</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ua</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea ">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Departure Delay</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>-1             </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>-1             </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>-1             </td>
        </tr>
    </tbody>
</table>
<p>... (37360 rows omitted)</p></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ua_bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ua</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="n">ua_bins</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">'minute'</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Center_32_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The histogram of the delay times is right-skewed: it has a long right hand tail.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The mean gets pulled away from the median in the direction of the tail. So we expect the mean delay to be larger than the median, and that is indeed the case:</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ua</span><span class="p">[</span><span class="s1">'Departure Delay'</span><span class="p">])</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>13.885555228434548</pre></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">ua</span><span class="p">[</span><span class="s1">'Departure Delay'</span><span class="p">])</span>
</pre></div></div></div>
<div class="output_text output_subarea output_execute_result">
<pre>2.0</pre></div></div>